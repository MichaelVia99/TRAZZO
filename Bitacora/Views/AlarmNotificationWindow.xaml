<Window x:Class="Bitacora.Views.AlarmNotificationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Alerta Bitácora"
        Width="400"
        Height="105"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        Background="Transparent"
        ShowInTaskbar="False"
        Topmost="True">

    <Border x:Name="MainBorder"
            Background="{StaticResource CardBackground}"
            CornerRadius="6"
            BorderBrush="Transparent"
            BorderThickness="1"
            Effect="{StaticResource ElevatedShadow}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="7"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Lateral Color Bar -->
            <Border x:Name="LateralBar" 
                    Grid.Column="0" 
                    CornerRadius="4,0,0,4"
                    Background="Gray"/>

            <!-- Main Content -->
            <Grid Grid.Column="1" Margin="10,8,10,8">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/> <!-- Header -->
                    <RowDefinition Height="Auto"/> <!-- Badges -->
                    <RowDefinition Height="Auto"/> <!-- Title -->
                    <RowDefinition Height="Auto"/> <!-- Project -->
                    <RowDefinition Height="*"/>    <!-- Spacer -->
                    <RowDefinition Height="Auto"/> <!-- Footer -->
                </Grid.RowDefinitions>

                <!-- Header -->
                <Grid Grid.Row="0" Margin="0,0,0,8">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Image Source="/logo.png" Width="14"  Margin="0,0,10,0" RenderOptions.BitmapScalingMode="HighQuality"/>
                        <TextBlock x:Name="HeaderTitleText"
                                   Text="¡Nueva Asignación!" 
                                   FontSize="11" 
                                   FontWeight="Bold" 
                                   Foreground="{StaticResource TextPrimary}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                    <!-- Footer (Button + Time) -->
                    <StackPanel Grid.Row="1" HorizontalAlignment="Right" >
                        <Button x:Name="StopButton"
                            Width="Auto"
                            MinWidth="0"
                            Height="20"
                            Padding="10,0"
                            Style="{StaticResource PrimaryButtonStyle}"
                            Click="StopButton_Click"
                            Cursor="Hand">      
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                                <TextBlock Text="Detener" FontSize="10" Foreground="White"/>
                            </StackPanel>
                        </Button>
                        
                    </StackPanel>
                </Grid>

                <!-- Project and Time -->
                <Grid Grid.Row="2" Margin="0,0,5,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
                        <TextBlock Text="Proyecto: " 
                                   FontSize="10" 
                                   Foreground="{StaticResource TextSecondary}"/>
                        <TextBlock x:Name="ProjectText" 
                                   FontSize="10" 
                                   Foreground="{StaticResource TextPrimary}"
                                   FontWeight="SemiBold"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                        <TextBlock x:Name="EmpresaText" 
                                   FontSize="10" 
                                   Foreground="{StaticResource TextSecondary}"
                                   FontWeight="SemiBold"
                                   Visibility="Collapsed"
                                   Margin="0,0,10,0"/>
                        <TextBlock x:Name="TimeText" 
                                   Text="Hace 0 seg" 
                                   FontSize="9" 
                                   Foreground="{StaticResource TextSecondary}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </Grid>


                <!-- Title -->
                <TextBlock x:Name="TitleText" 
                           Grid.Row="3" 
                           FontSize="10" 
                           FontWeight="Bold" 
                           Foreground="{StaticResource TextPrimary}"
                           TextWrapping="Wrap" 
                           TextTrimming="CharacterEllipsis"
                           MaxHeight="44"
                           Margin="0,3,0,0"/>

                
                <!-- Badges Row -->
                <Grid Grid.Row="4" Margin="0,8,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                        <!-- Priority -->
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,15,0">
                        <Border x:Name="PrioridadBadgeBorder" 
                CornerRadius="10" 
                Width="20" 
                Height="20" 
                Margin="0,0,6,0"
                VerticalAlignment="Center">
                            <Grid>
                                <Viewbox x:Name="PrioridadCriticaIcon" Width="12" Height="12" Visibility="Collapsed">
                                    <Canvas Width="26" Height="26">
                                        <Path Data="M12 4 L3 20 H21 Z" Stroke="White" StrokeThickness="2" StrokeLineJoin="Round" Fill="Transparent"/>
                                        <Path Data="M12 9 L12 13" Stroke="White" StrokeThickness="2" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                        <Path Data="M12 17 L12.01 17" Stroke="White" StrokeThickness="2" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                    </Canvas>
                                </Viewbox>
                                <Viewbox x:Name="PrioridadAltaIcon" Width="12" Height="12" Visibility="Collapsed">
                                    <Canvas Width="24" Height="24">
                                        <Ellipse Width="18" Height="18" Stroke="White" StrokeThickness="2" Canvas.Left="3" Canvas.Top="3"/>
                                        <Path Data="M12 8 L12 15" Stroke="White" StrokeThickness="2" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                        <Path Data="M9 11 L12 8 L15 11" Stroke="White" StrokeThickness="2" StrokeLineJoin="Round" StrokeStartLineCap="Round" StrokeEndLineCap="Round" Fill="Transparent"/>
                                    </Canvas>
                                </Viewbox>
                                <Viewbox x:Name="PrioridadNormalIcon" Width="12" Height="12" Visibility="Collapsed">
                                    <Canvas Width="24" Height="24">
                                        <Ellipse Width="18" Height="18" Stroke="White" StrokeThickness="2" Canvas.Left="3" Canvas.Top="3"/>
                                        <Path Data="M9 12 L15 12" Stroke="White" StrokeThickness="2" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                    </Canvas>
                                </Viewbox>
                                <Viewbox x:Name="PrioridadMenorIcon" Width="12" Height="12" Visibility="Collapsed">
                                    <Canvas Width="24" Height="24">
                                        <Ellipse Width="18" Height="18" Stroke="White" StrokeThickness="2" Canvas.Left="3" Canvas.Top="3"/>
                                        <Path Data="M12 9 L12 16" Stroke="White" StrokeThickness="2" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                        <Path Data="M9 13 L12 16 L15 13" Stroke="White" StrokeThickness="2" StrokeLineJoin="Round" StrokeStartLineCap="Round" StrokeEndLineCap="Round" Fill="Transparent"/>
                                    </Canvas>
                                </Viewbox>
                            </Grid>
                        </Border>
                        <TextBlock x:Name="PrioridadText" 
                   FontSize="9" 
                   FontWeight="SemiBold"
                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Type -->
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,15,0">
                        <Border x:Name="TipoBadgeBorder" 
                                Width="20" Height="20" 
                                CornerRadius="4" 
                                Margin="0,0,6,0"
                                VerticalAlignment="Center">
                            <StackPanel Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Center">
                                <TextBlock x:Name="TipoIconText" 
                                           FontFamily="Segoe MDL2 Assets" 
                                           FontSize="13" 
                                           Foreground="White" 
                                           HorizontalAlignment="Center"
                                           Margin="0,0,0,0"/>
                            </StackPanel>
                        </Border>
                        <TextBlock x:Name="TipoText" 
                                   FontSize="9" 
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextSecondary}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                        <!-- Status -->
                        <Border x:Name="EstadoBadge" CornerRadius="4" Padding="10,0">
                            <TextBlock x:Name="EstadoText" 
                                       VerticalAlignment="Center"
                                       FontSize="9" 
                                       FontWeight="Bold" 
                                       Foreground="White"
                                       TextAlignment="Center"/>
                        </Border>
                    </StackPanel>
                </Grid>
            </Grid>
        </Grid>
    </Border>
</Window>